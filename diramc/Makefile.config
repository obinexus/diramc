# Makefile.config - Shared configuration for OBINexus diramc build system
# Aligns with riftlang.exe → .so.a → rift.exe → gosilang toolchain

# Compiler settings
CC = gcc
AR = ar
CFLAGS = -Wall -Wextra -g -fPIC -pthread -D_GNU_SOURCE
LDFLAGS = -ldl -lpthread -lm
ARFLAGS = rcs

# Directory structure
SRC_DIR = src
OBJ_DIR = build
LIB_DIR = lib
BIN_DIR = bin
INCLUDE_DIR = include

# Include paths
INCLUDES = -I$(INCLUDE_DIR) -I.

# Build mode (debug/release)
BUILD_MODE ?= debug

ifeq ($(BUILD_MODE),release)
    CFLAGS += -O3 -DNDEBUG
else
    CFLAGS += -O0 -DDEBUG -g3
endif

# Export for sub-makefiles
export CC AR CFLAGS LDFLAGS ARFLAGS
export SRC_DIR OBJ_DIR LIB_DIR BIN_DIR INCLUDE_DIR
export INCLUDES BUILD_MODE
